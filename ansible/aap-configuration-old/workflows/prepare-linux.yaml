---
- name: Create Linux Preparation Workflow Template
  ansible.controller.workflow_job_template:
    name: "Linux Preparation Workflow"
    description: "Workflow to prepare Linux systems: ping test followed by PCI-DSS compliance"
    organization: "{{ default_organization }}"
    ask_limit_on_launch: true
    limit: "os_type_Linux"

- name: Create workflow node - Linux PCI-DSS Compliance
  ansible.controller.workflow_job_template_node:
    identifier: "Linux PCI-DSS compliance"
    workflow_job_template: "Linux Preparation Workflow"
    unified_job_template: "Linux Management - PCI-DSS Compliance"

- name: Create workflow node - Linux Ping Test
  ansible.controller.workflow_job_template_node:
    identifier: "Linux connectivity test"
    workflow_job_template: "Linux Preparation Workflow"
    unified_job_template: "Linux Management - Ping Test"
    success_nodes:
      - "Linux PCI-DSS compliance"
